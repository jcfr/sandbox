
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Emoji Example &#8212; wordcloud 1.3 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/main.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using custom colors" href="a_new_hope.html" />
    <link rel="prev" title="Image-colored wordcloud" href="colored.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Wordcloud</a>
        <span class="navbar-text navbar-version pull-left"><b>1.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Examples</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="single_word.html">Single Word</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple.html">Minimal Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="masked.html">Masked wordcloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="frequency.html">Using frequency</a></li>
<li class="toctree-l1"><a class="reference internal" href="colored.html">Image-colored wordcloud</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Emoji Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_new_hope.html">Using custom colors</a></li>
<li class="toctree-l1"><a class="reference internal" href="wordcloud_cn.html">create wordcloud with chinese</a></li>
<li class="toctree-l1"><a class="reference internal" href="colored_by_group.html">Colored by Group Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.WordCloud.html">wordcloud.WordCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.ImageColorGenerator.html">wordcloud.ImageColorGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.random_color_func.html">wordcloud.random_color_func</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Emoji Example</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="colored.html" title="Previous Chapter: Image-colored wordcloud"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Image-colored...</span>
    </a>
  </li>
  <li>
    <a href="a_new_hope.html" title="Next Chapter: Using custom colors"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Using custom colors &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container content-container">
  
  <div class="sphx-glr-download-link-note admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Click <a class="reference internal" href="#sphx-glr-download-auto-examples-emoji-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="emoji-example">
<span id="sphx-glr-auto-examples-emoji-py"></span><h1>Emoji Example<a class="headerlink" href="#emoji-example" title="Permalink to this headline">Â¶</a></h1>
<p>A simple example that shows how to include emoji.  Note that this example does not seem to work on OS X, but does
work correctly in Ubuntu.</p>
<p>There are 3 important steps to follow to include emoji:
1) Read the text input with io.open instead of the built in open.  This ensures that it is loaded as UTF-8
2) Override the regular expression used by word cloud to parse the text into words.  The default expression
will only match ascii words
3) Override the default font to something that supports emoji.  The included Symbola font includes black and
white outlines for most emoji.  There are currently issues with the PIL/Pillow library that seem to prevent
it from functioning correctly on OS X (<a class="reference external" href="https://github.com/python-pillow/Pillow/issues/1774">https://github.com/python-pillow/Pillow/issues/1774</a>), so try this
on ubuntu if you are having problems.</p>
<img alt="../_images/sphx_glr_emoji_001.png" class="sphx-glr-single-img" src="../_images/sphx_glr_emoji_001.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span>

<span class="c1"># get data directory (using getcwd() is needed to support running example in generated IPython notebook)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;__file__&quot;</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1"># It is important to use io.open to correctly load the file as UTF-8</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;happy-emoji.txt&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># the regex used to detect words is a combination of normal words, ascii art, and emojis</span>
<span class="c1"># 2+ consecutive letters (also include apostrophes), e.x It&#39;s</span>
<span class="n">normal_word</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:\w[\w&#39;]+)&quot;</span>
<span class="c1"># 2+ consecutive punctuations, e.x. :)</span>
<span class="n">ascii_art</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:[{punctuation}][{punctuation}]+)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">punctuation</span><span class="o">=</span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">)</span>
<span class="c1"># a single character that is not alpha_numeric or other ascii printable</span>
<span class="n">emoji</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:[^\s])(?&lt;![\w{ascii_printable}])&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ascii_printable</span><span class="o">=</span><span class="n">string</span><span class="o">.</span><span class="n">printable</span><span class="p">)</span>
<span class="n">regexp</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;{normal_word}|{ascii_art}|{emoji}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">normal_word</span><span class="o">=</span><span class="n">normal_word</span><span class="p">,</span> <span class="n">ascii_art</span><span class="o">=</span><span class="n">ascii_art</span><span class="p">,</span>
                                                     <span class="n">emoji</span><span class="o">=</span><span class="n">emoji</span><span class="p">)</span>

<span class="c1"># Generate a word cloud image</span>
<span class="c1"># The Symbola font includes most emoji</span>
<span class="n">font_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;fonts&#39;</span><span class="p">,</span> <span class="s1">&#39;Symbola&#39;</span><span class="p">,</span> <span class="s1">&#39;Symbola.ttf&#39;</span><span class="p">)</span>
<span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span><span class="n">font_path</span><span class="o">=</span><span class="n">font_path</span><span class="p">,</span> <span class="n">regexp</span><span class="o">=</span><span class="n">regexp</span><span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># Display the generated image:</span>
<span class="c1"># the matplotlib way:</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  0.308 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-emoji-py">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/emoji.py" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">emoji.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/emoji.ipynb" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">emoji.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Andreas Mueller.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>